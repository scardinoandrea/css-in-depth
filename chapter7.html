<!DOCTYPE html>
<head>
  <style>
    body {
      font-family: Helvetica, Arial, sans-serif;
      min-height: 200vh;
      margin: 0;
    }

    button {
      padding: 0.5em 0.7em;
      border: 1px solid #8d8d8d;
      background-color: white;
      font-size: 1em;
    }

    .top-banner {
      padding: 1em 0;
      background-color: #ffd698;
    }

    .top-banner-inner {
      width: 80%;
      max-width: 1000px;
      margin: 0 auto;
    }

    .modal {
      display: none; /* hidden by default --> JS will set display: block when it opens the modal*/
    }

    .modal-backdrop {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: rgba(
        0,
        0,
        0,
        0.5
      ); /* red-green-blue-alpha(specifies transparency)*/
      z-index: 1;
    }

    .modal-body {
      position: fixed;
      top: 3em;
      bottom: 3em;
      right: 20%;
      left: 20%;
      padding: 2em 3em;
      background-color: white;
      overflow: auto;
      z-index: 2;
    }

    .modal-close {
      position: absolute;
      top: 0.3em;
      right: 0.3em;
      padding: 0.3em;
      cursor: pointer;
      font-size: 2em;
      height: 1em;
      width: 1em;
      text-indent: 10em; /* move the "close" text off-screen */
      overflow: hidden; /* move the "close" text off-screen */
      border: 0;
    }
    .modal-close::after {
      position: absolute;
      line-height: 0.5;
      top: 0.2em;
      left: 0.1em;
      text-indent: 0;
      content: "\00D7"; /* Unicode for multiplication sign */
    }

    .container {
      display: flex;
      width: 80%;
      max-width: 1000px;
      margin: 1em auto;
      min-height: 100vh;
    }

    .col-main {
      flex: 1 80%;
    }

    .col-sidebar {
      flex: 20%;
    }

    .affix {
      position: sticky;
      top: 1em;
    }

    .dropdown {
      display: inline-block;
      position: relative; /* so that the dropdown menu can be positioned relative to this element */
    }

    .dropdown-label {
      padding: 0.5em 2em 0.5em 1.5em;
      border: 1px solid #ccc;
      background-color: #eee;
    }

    .dropdown-label::after {
      content: ""; /* empty content for the arrow */
      position: absolute; /* positioned relative to the .dropdown-label element */
      right: 1em; /* 1em from the right edge of the label */
      top: 1em; /* 1em from the top edge of the label */
      border: 0.3em solid; /* create a triangle using borders */
      border-color: black transparent transparent; /* only the top border is colored, the others are transparent */
    }

    .dropdown-label:hover::after {
      top: 0.7em; /* move the arrow down on hover */
      border-color: transparent transparent black;
      cursor: pointer;
    }

    .dropdown-menu {
      display: none; /* hidden by default */
      position: absolute; /* positioned relative to the nearest positioned ancestor (the .dropdown element) */
      left: 0; /* align the left edge of the menu with the left edge of the dropdown */
      top: 2.1em; /* position the top of the menu just below the bottom of the label */
      min-width: 100%; /* make the menu at least as wide as the dropdown */
      background-color: #eee;
    }

    .dropdown:hover .dropdown-menu {
      display: block;
    }

    .submenu {
      padding-left: 0;
      margin: 0;
      list-style-type: none;
      border: 1px solid #999;
    }

    .submenu > li + li {
      border-top: 1px solid #999;
    }

    .submenu > li > a {
      display: block;
      padding: 0.5em 1.5em;
      background-color: #eee;
      color: #369;
      text-decoration: none;
    }

    .submenu > li > a:hover {
      background-color: #fff;
    }

    .box {
      display: inline-block;
      width: 200px;
      line-height: 200px;
      text-align: center;
      border: 2px solid black;
      background-color: #ea5;
      margin-left: -60px;
      vertical-align: top;
    }

    .one {
      margin-left: 0;
    }
    .two {
      margin-top: 30px;
    }
    .three {
      margin-top: 60px;
    }

    .positioned {
      position: relative;
      background-color: #5ae;
      z-index: 1;
    }

    .absolute {
      position: absolute;
      top: 1em;
      right: 1em;
      height: 2em;
      background-color: #fff;
      border: 2px dashed #888;
      z-index: 100; /* even with z-index > than positioned element, it stays below the box 2 because its parent belongs to a stacking context with lower z-index */
      line-height: initial;
      padding: 1em;
    }

    /* Notes
    - position: fixed --> element is positioned relative to the viewport, so it always stays in the same place even when the page is scrolled
    - position: absolute --> element is positioned relative to its nearest positioned ancestor (an ancestor with a position other than static). If no such ancestor exists, it is positioned relative to the initial containing block (usually the body element).
    - creating a triangle using borders: (bigger borders cover the space pushing the content inward, creating the triangle shape between them)
      - set the width and height of the element to 0
      - set the border-width to the desired size of the triangle
      - set the border-style to solid
      - set the border-color to specify which side of the triangle should be visible (the other sides should be transparent)
    - list of shapes built with CSS borders: https://css-tricks.com/examples/ShapesOfCSS/
    - As the browser parses HTML into the DOM, it also creates another tree structure called the RENDER TREE. This represent the visual appearance and position of each element. It's also responsible for determining the order in which the browser will paint the elements. This order is important because elements painted later appear in front of elements painted earlier, should they happen to overlap.
    - Under normal circumstances, this order is determined by the order the element appear in the HTML. This behavior changes when you start positioning elements. The browser first paint all non-positioned elements, then it paints the positioned ones. By default, any positioned elements appears in front of any non-positioned elements.
    - z-index property: controls the stacking order of positioned elements (elements with position set to relative, absolute, fixed, or sticky). An element with a higher z-index value will appear in front of an element with a lower z-index value.
    - stacking context: consist of an element or a group of elements that are painted together by the browser. One element is the root of the stacking context, so when you add a z-index to a positioned element that element becomes the root of a new stacking context. All of its descendant elements are then part of that stacking context.
    - Not to be confused with block formatting context
      - Stacking contexts deal with which elements are in front of other elements
      - Block formatting contexts deal with how elements are positioned next to each other horizontally and vertically
    - stacking context order:
      1. the root element of the document (html)
      2. positioned elements with a z-index value other than auto, in order of increasing z-index value
      3. non-positioned elements, in order of appearance in the HTML
      4. positioned elements with z-index value of auto, in order of appearance in the HTML
      5. positioned elements with positive z-index
    - sticky positioning--> an element is treated as relative positioned until it crosses a specified threshold, at which point it is treated as fixed positioned. The threshold is defined using the top, right, bottom, or left properties.  
    */
  </style>
</head>

<body>
  <header class="top-banner">
    <div class="top-banner-inner">
      <p>
        Find out what's going on at Wombat Coffee each month. Sign up for our
        newsletter:
        <button id="open">Sign up</button>
      </p>
    </div>
  </header>
  <div class="modal" id="modal">
    <div class="modal-backdrop"></div>
    <div class="modal-body">
      <button class="modal-close" id="close">
        <span class="sr-only">close</span>
      </button>
      <h2>Wombat Newsletter</h2>
      <p>Sign up for our monthly newsletter. No spam. We promise!</p>
      <form>
        <p>
          <label for="email">Email address:</label>
          <input type="text" name="email" />
        </p>
        <p><button type="submit">Submit</button></p>
      </form>
    </div>
  </div>

  <div class="container">
    <main class="col-main">
      <nav>
        <div class="dropdown">
          <div class="dropdown-label">Main Menu</div>
          <div class="dropdown-menu">
            <ul class="submenu">
              <li><a href="/">Home</a></li>
              <li><a href="/coffees">Coffees</a></li>
              <li><a href="/brewers">Brewers</a></li>
              <li><a href="/specials">Specials</a></li>
              <li><a href="/about">About us</a></li>
            </ul>
          </div>
        </div>
      </nav>
      <h1>Wombat Coffee Roasters</h1>

      <div class="box one positioned">
        One
        <div class="absolute">nested</div>
      </div>
      <div class="box two positioned">two</div>
      <div class="box three">three</div>
    </main>

    <aside class="col-sidebar">
      <div class="affix">
        <ul class="submenu">
          <li><a href="/">Home</a></li>
          <li><a href="/coffees">Coffees</a></li>
          <li><a href="/brewers">Brewers</a></li>
          <li><a href="/specials">Specials</a></li>
          <li><a href="/about">About us</a></li>
        </ul>
      </div>
    </aside>
  </div>

  <script type="text/javascript">
    var button = document.getElementById("open");
    var close = document.getElementById("close");
    var modal = document.getElementById("modal");

    button.addEventListener("click", function (event) {
      event.preventDefault();
      modal.style.display = "block";
    });

    close.addEventListener("click", function (event) {
      event.preventDefault();
      modal.style.display = "none";
    });
  </script>
</body>
